# 휴대용 방범 경보기

- - -

## 제작 계기

<center>
    <img src="https://ifh.cc/g/J7BCxP.jpg" width="350" height="570">
</center>

<br>

<center>
    <A href="https://m.post.naver.com/viewer/postView.nhn?volumeNo=26344748&memberNo=44865264&vType=VERTICAL"> 기사링크</A>
</center>

<br>
<br>

이 작품을 제작하게 된 계기는 여러 매체를 통해서 **사회적 약자들이 위험 상황에 자주 처하게 된다는 것**을 알게 되었습니다. 

이러한 상황을 해결하기 위해 위험 상황을 미리 예방할 수 있는 장치를 제작하여 사회적 약자들에게 위험 상황이 발생했을 때

*신속한 도움* 을 청할 수 있도록 하기 위해 작품을 제작하게 되었습니다.

<br>
<br>
- - -

## 작품 구성

<br>

> **아두이노**와 **각종 전기 소자**를 사용하여 제작한 경보기 본체와

> **앱 인벤터 2**를 이용하여 제작한 경보기 어플

<br>

&nbsp;&nbsp;&nbsp;&nbsp;로 구성되어 있습니다.

<br>
<br>

<b> <center> 경보기 본체 </center> </b>

<center>
    <img src="https://ifh.cc/g/12L0eP.png" width="320" height="180">
</center>
    
<br>
    
<b> <center> 경보기 어플 </center> </b>

<center>
    <img src="https://ifh.cc/g/tanj8M.png" width="175" height="310">
</center>

- - -

<br>


## **제원** 및 사용 **프로그램**

<br>

> **제원** 

###### 만능 기판, 케이블, 마그네트 스위치, 베터리, 엠프, 블루투스 모듈

<br>

> **사용 프로그램**

###### 아두이노, c언어, 앱인벤터 2, 123d

<br>

#### 앱 인벤터 2를 이용한 경보기 본체 코드

<img src="https://ifh.cc/g/S6mqb4.png" width="804" height="560">

<br>

#### 아두이노를 이용한 경보기 어플 코드

```

#include<SoftwareSerial.h>      // 블루투스 관련 해더 파일
SoftwareSerial bt(6,7);         // 6,7번 핀을 rx,tx로 사용

void setup() {
  pinMode(9,OUTPUT);            // 9번 핀으로 스피커 출력
  pinMode(11,INPUT);            // 11번 핀으로 마그네트 스위치 신호 받음

}  
  Serial.begin(9600);           // 시리얼 모니터로 값 출력

  bt.begin(9600);               // 블루투스 통신을 9600 밀리초 간격으로 통신
} 

void loop() { 
  int s = digitalRead(11);      // 11번 값 읽어드림
  bt.println(s);                // 블루투스 통신을 이용하여 핸드폰으로 신호 전송
  delay(500);                   // 0.5초 지연
  Serial.println(s);            // 시리얼 모니터로 s값 출력
  if(s==0)                      // 11번 값이 0일 경우
  {
      tone (9,1200);            // 스피커로 1200Hz 소리 출력
      delay(500);               // 0.5초 지연
      tone (9,800);             // 스피커로 800Hz 소리 출력
  }
  else{                         // 아닐 경우
    noTone(9);                  // 소리 멈춤
  }
}

```

- - -

## 작품 설명

<br>

경보기에 부착된 스트랩을 당기게 되면, 

본체에서 **경보음**을 발생시키고, 연동된 핸드폰으로 **위치 정보**가 담겨진 **전화**, **문자**를 보내줌으로 써

사용자가 위험 상황에 처했을 때 *신속한 도움* 을 청할 수 있습니다.


- - -

## 작동 원리

### 사용 준비

1. **블루투스**로 핸드폰과 이두이노 연결

2. 어플에서 **전화번호 입력**

    입력한 전화번호를 등록버튼을 클릭하면 tinydb를 통해 전화번호가 저장된다.
    
    전화번호 불러오기를 클릭하여 전화번호를 바로 사용할 수 있다.



### 사용자의 행동감지

<br>

> **스트랩을 당김 -> 마그네트 스위치가 회로 끊음 -> 전기 신호 끊김 -> 아두이노로 보내지는 값이 1에서 0으로 변경**

사용자가 위험상황에 처했을 때, 경보기에 자석이 부착된 **스트랩을 당기게 되면**, 

**마그네트 스위치**가 **자석이 없어짐을 감지**하여 아두이노 입력 핀과 연결되어 있는 **회로를 끊게 됩니다.** 

스위치의 회로가 끊어지면, 전기 신호가 끊어지게 되면서 **아두이노로 입력되는 디지털 값이 1에서 0으로 변경**됩니다. 

<br>

### 아두이노 실행부

<br>

> **아두이노로 보내지는 값 1에서 0 -> 경보음(경보기 본체) +  블루투스에서 보내지는 값 1에서 0(경보기 어플)**

아두이노에서 0의 값을 받게 되면, 

스피커에서 **경보음을 출력함**과 동시에 

**블루투스 통신 모듈**을 통해서 **스마트폰 어플로 보내지는 값이 1에서 0으로 변경**됩니다.

<br>

### 스마트폰 실행부

<br>

> **블루투슬 통해 보내지는 값 1에서 0 -> 어플에서 0의 값을 받음 -> 전화 + 위치 정보가 담겨진 문자 메시지 + 어플 종료**

불루투스 통신을 통해 어플에서 0의 값을 받게 되면,

설정한 연락처로 **전화**와 **자신의 위치 정보가 담겨져 있는 문자 메시지**를 보내고,

몇 초 후에 어플을 **종료**하게 됩니다.

<br>

### 부가 설명

<br>

> **자석의 유무를 감지**해서 자석이 **있으면 전기가 흐르고 없으면 끊기게** 함

tinydb란 : 데이터를 저장할 수 있는 저장소로 **텍스트 파일로 된 데이터를 저장**

&nbsp;&nbsp;&nbsp;&nbsp;어플에서 블루투스 연결여부를 확인 할 수 있고,

&nbsp;&nbsp;&nbsp;&nbsp;블루투스가 연결되었을 때 아두이노에서 보내지는 값이 어플로 전달 

<br>

- - -

## 작품 전망

<br>

&nbsp;&nbsp;&nbsp;&nbsp;자바를 공부하고 안드로이드 스튜디오를 사용하여 완성도 있는 어플 제작

&nbsp;&nbsp;&nbsp;&nbsp;전기전자에 대해 좀 더 공부해서 회로의 완성도를 높임

&nbsp;&nbsp;&nbsp;&nbsp;제품의 외관을 어린이들에게 친숙한 모양으로 다시 제작
